import { Steps } from "nextra/components";

## OMOP-CDM setup

Before Bunny can get up and running, it needs a database to query.
If you don't have a real OMOP-CDM, you can run a mock database.

### Mock database setup

<Steps>
#### Start a containerized database

The `compose.yml` in the root of the Hutch tools repository can start a database container with

```bash copy
docker compose up db
```

This will initialise a Postgres instance in the container.

<Callout type="info">
  These instructions assume you have a pre-existing OMOP CDM Postgresql database
  and it can be called `hutch_db.tar`, for example, as below.
</Callout>

#### Copy the data

Navigate to the folder containing `hutch_db.tar` and copy it into the container with:

```bash copy
docker cp hutch_db.tar hutch-bunny-dev-db-1:/
```

#### Start running bash in your container

```bash copy
docker exec -it hutch-bunny-dev-db-1 bash
```

#### Use pg_restore to load the data into the database

```bash copy
pg_restore --dbname=postgres --host=localhost --port=5432 --username=postgres --password hutch_db.tar
```

If prompted, provide "postgres" as a password

You can then exit the container with `ctrl+d` or `exit`

</Steps>

