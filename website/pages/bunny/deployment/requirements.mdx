# Requirements

## System 

| Requirement         | Minumum Specification              |
|---------------------|------------------------------------|
| CPU                 | 2 vCPUs                            |
| Memory (RAM)        | 4 GB                               |
| Storage             | 10 GB SSD                          |
| Container Runtime   | Docker 24.x / Podman latest        |
| Network             | Outbound HTTPS (port 443)          |
| Database Access     | OMOP CDM PostgreSQL / SQLServer    |

Notes: 
- Any operating system that supports running containers is sufficient.
- Requirements may vary depending on workload and deployment environment.

## OMOP CDM

Bunny requires an [OMOP CDM](https://ohdsi.github.io/CommonDataModel/background.html) database to query for data.

Ideally the database should comply with the common data model, and the minimum data model that Bunny needs is slightly different [than outlined](https://healthdatagateway.org/en/data-custodian/support/cohort-discovery) on the HDR Gateway. 

Recommended tables and field names:

| OMOP Table            | OMOP Field Names                                                                        |
|------------------------|----------------------------------------------------------------------------------------|
| Person                 | person_id, gender_concept_id, year_of_birth, race_concept_id, **ethnicity_concept_id*** |
| Condition Occurrence   | condition_occurrence_id, person_id, condition_concept_id, condition_start_date         |
| Procedure Occurrence   | procedure_occurrence_id, person_id, procedure_concept_id, procedure_date               |
| Drug Exposure          | drug_exposure_id, person_id, drug_concept_id, drug_exposure_start_date                 |
| Observation            | observation_id, person_id, observation_concept_id, observation_date                    |
| Measurement            | measurement_id, person_id, measurement_concept_id, measurement_date                    |
| **Concept***            | **concept_id***, **domain_id***                                                          |

*Different from the HDR Gateway minimum data model.

Additionally the following indexes are recommended from the CDM to ensure queries are processed quickly.

| OMOP Table             | Recommended Indexes                |
|------------------------|------------------------------------|
| Person                 | idx_person_id                      |
| Concept                | idx_concept_concept_id             |
| Condition Occurrence   | idx_condition_concept_id_1         |
| Observation            | idx_observation_concept_id_1       |
| Measurement            | idx_measurement_concept_id_1       |
