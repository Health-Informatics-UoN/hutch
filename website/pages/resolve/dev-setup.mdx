## Setting up Resolve for development

To make sure you have a working version of Resolve, follow the steps in the Quickstart. {/* Add the link when the quickstart branch has been merged */}

If the resolve-daemon logs messages saying that it's setting up a database connection, looking for and receiving jobs, and resolving queries, then it's working.
To double check, you can also use the resolve-cli to generate an output JSON.

### Using the environment
Resolve uses poetry to manage its dependencies.
To test any changes made to Resolve in development you can use either
```bash
poetry run resolve-[daemon/cli]
```
or start a poetry shell
```bash
poetry shell
resolve-[daemon/cli]
```

## Architecture

The same core components are used by the daemon and command-line interface.
CLI components are shown in blue, daemon components shown in green.


```mermaid
graph TD;
  input(User input);
  db[(OMOP-CDM)];
  relay(Relay);
  subgraph resolve [resolve];
    dbmanager[Database manager];
    polling[Polling];
    obfuscation[Obfuscation];
    parser[Query parsing];
  end;
  input --> parser
  dbmanager --> db;
  parser -- Configures query --> dbmanager;
  polling -- Polls for jobs --> relay;
  relay -- Sends jobs --> parser;
  db --> obfuscation;
  obfuscation -- Sends obfuscated results --> relay;
  obfuscation -- Writes obfuscated results --> output[output.json]


classDef cli fill: dodgerblue;
class input,output cli;

classDef daemon fill: olivedrab;
class relay,polling daemon;
```


